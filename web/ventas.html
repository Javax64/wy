<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Venta</title>
    
    <link rel="stylesheet" href="css/ventas.css">
    <style>
        /* Ocultar el contenido por defecto */
        body {
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.1s linear;
        }
    </style>
    <script src="js/login.js"></script>
    <script type="text/javascript">
        window.onload = verificarAccesoGeneral;
    </script>
    <script src="https://unpkg.com/@zxing/library@0.18.6/umd/index.js"></script>
</head>
<body>
    <header>
        <a href="Admin_ventas.html" class="admin-button">Menu</a>
        <h1>Nueva Venta</h1>
    </header>
    <main>
        <div id="alertsContainer" class="alerts-container"></div>
        <button id="startScanButton">Escanear Producto</button>
        
        <div id="scannerContainer" class="modal">
            <div class="modal-content scanner-modal-content">
                <span class="close" id="closeScannerModal">&times;</span>
                <video id="video" class="scanner-video"></video>
                <div id="scannerFrame">
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                    <div id="scanline"></div>
                </div>
            </div>
        </div>
        
        <h2>Productos Seleccionados</h2>
        <table id="selectedProductsTable">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Precio</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <div id="totalPrice">Total: 0.00 Bs</div>
        <button id="completeSaleButton">Terminar Venta</button>

        <!-- Modal de Confirmación -->
        <div id="confirmationModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeConfirmationModal()">&times;</span>
                <p id="confirmationText">¿Estás seguro de que deseas eliminar este producto de la venta?</p>
                <button id="confirmButton" onclick="confirmDeleteProduct()">Confirmar</button>
                <button id="cancelButton" onclick="closeConfirmationModal()">Cancelar</button>
            </div>
        </div>

        <!-- Modal de Método de Pago -->
        <div id="paymentModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closePaymentModal()">&times;</span>
                <p>Seleccione el método de pago:</p>
                <button id="paymentTransfer">Transferencia</button>
                <button id="paymentCash">Efectivo</button>
            </div>
        </div>

        <!-- Modal de Confirmación de Salida -->
        <div id="exitConfirmationModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeExitConfirmationModal()">&times;</span>
                <p>Tienes productos sin completar la venta. ¿Estás seguro de que deseas salir?</p>
                <button id="exitConfirmButton">Salir</button>
                <button id="exitCancelButton" onclick="closeExitConfirmationModal()">Cancelar</button>
            </div>
        </div>
    </main>

    <script type="text/javascript" src="/eel.js"></script>
    <script src="js/ventas.js"></script>
</body>
</html>
